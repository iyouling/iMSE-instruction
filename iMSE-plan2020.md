# 2020掌酷微服务架构组建计划
---
## 1 微服务架构是什么？
### 1.1 微+服务
小：微服务体积小，2 pizza团队。
独：能够独立的部署和运行。
轻：使用轻量级的通信机制和架构。
松：为服务之间是松耦合的。

### 1.2 掌酷微服务架构：iMSE
包含传统的微服务架构，以及为掌酷的业务模式而设计，供掌酷技术开发团队使用，是一套可扩展、高可用的掌酷技术标准化流程。

## 2 为什么要组建微服务架构？
### 2.1 掌酷技术现状
### 2.2 行业发展
#### 2.2.1 技术演变
单体架构 → RPC架构 → SOA架构 → 微服务架构
#### 2.2.2 单体架构问题
  1. 复杂性逐渐变高：比如有的项目有几十万行代码，各个模块之间区别比较模糊，逻辑比较混乱，代码越多复杂性越高，越难解决遇到的问题。
  2. 技术债务逐渐上升：公司的人员流动是再正常不过的事情，有的员工在离职之前，疏于代码质量的自我管束，导致留下来很多坑，由于单体项目代码量庞大的惊人，留下的坑很难被发觉，这就给新来的员工带来很大的烦恼，人员流动越大所留下的坑越多，也就是所谓的技术债务越来越多。
  3. 阻碍技术创新：比如以前的某个项目使用tp3.2写的，由于各个模块之间有着千丝万缕的联系，代码量大，逻辑不够清楚，如果现在想用tp5来重构这个项目将是非常困难的，付出的成本将非常大，所以更多的时候公司不得不硬着头皮继续使用老的单体架构，这就阻碍了技术的创新。
  4. 无法按需伸缩：比如说电影模块是CPU密集型的模块，而订单模块是IO密集型的模块，假如我们要提升订单模块的性能，比如加大内存、增加硬盘，但是由于所有的模块都在一个架构下，因此我们在扩展订单模块的性能时不得不考虑其它模块的因素，因为我们不能因为扩展某个模块的性能而损害其它模块的性能，从而无法按需进行伸缩。
  5. 系统高可用性差：因为所有的功能开发最后都部署到同一个框架里，运行在同一个进程之中，一旦某一功能涉及的代码或者资源有问题，那就会影响整个框架中部署的功能。

### 2.3 利与弊

## 3 组建方案
### 3.1 核心架构
### 3.2 服务组建
### 3.3 技术标准化

## 4 年度计划


## 5 分阶段目标
### 5.1 第一阶段
技术储备，实验试错，骨架搭建

### 5.2 第二阶段
核心架构开发

### 5.3 第三阶段
小范围业务接入，灰度测试，ab压测

### 5.4 第四阶段
服务拆分，完善，联调测试，标准化接入

### 5.5 第五阶段
全面接入，大数据分析，全面管控

## 6 当前进度

## 7 人员配置

## 8 成本预算
